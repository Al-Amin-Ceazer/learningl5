{"version":3,"sources":["galleryModel.js","userModel.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"models.js","sourcesContent":["myApp.factory('galleryModel', ['$http', '$rootScope', function($http, $rootScope) {\n    return {\n        myGalleries: '',\n        viewGallery: {},\n        loadGalleryById: function(id) {\n            this.viewGallery = this.getUserGalleries().then(function(response) {\n                var thisGallery = '';\n                angular.forEach(response.data, function(value, key) {\n                    if (value.id == id) {\n                        thisGallery = value;\n                    }\n                });\n\n                return thisGallery;\n            });\n            return this.viewGallery;\n        },\n        getUserGalleries: function() {\n            return this.myGalleries === '' ? this.fetchUserGalleries() : this.myGalleries;\n        },\n        fetchUserGalleries: function() {\n            console.log('Fetch from url');\n            this.myGalleries = $http.get(baseUrl + 'gallery').then(function(response) {\n                return response;\n            });\n            return this.myGalleries;\n        },\n        saveGallery: function(galleryData) {\n            return $http({\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                url: baseUrl + 'gallery',\n                method: \"POST\",\n                data: {\n                    name: galleryData.name\n                }\n            }).success(function(response) {\n                $rootScope.$broadcast('newUser', response);\n            }).error(function(data, status, headers) {\n\n            });\n        },\n        deleteGallery: function(id) {\n            console.log('delete gallery ' + id)\n                /*var galleries = this.myGalleries.$$state.value.data;\n                angular.forEach(galleries, function(value, key) {\n                    if (id == value.id) {\n                        console.log(galleries[key]);\n                        delete galleries[key];\n                    }\n                });\n                return this.myGalleries.$$state.value.data = galleries;*/\n        }\n    };\n}])\n","myApp.factory('userModel', ['$http', '$cookies', function($http, $cookies) {\n    var userModel = {};\n\n    /**\n     * Check if the credentials are correct from server\n     * and return the promise back to the controller\n     * \n     * @param  {array} loginData\n     * @return {promise}\n     */\n    userModel.doLogin = function(loginData) {\n        console.log(loginData);\n        return $http({\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            url: baseUrl + 'auth',\n            method: \"POST\",\n            data: {\n                email: loginData.email,\n                password: loginData.password\n            }\n        }).success(function(response) {\n            console.log(response);\n            $cookies.put('auth', JSON.stringify(response));\n        }).error(function(data, status, headers) {\n            console.log(data, status, headers);\n            alert(data);\n        });\n    };\n\n    /**\n     * Return whether the user is logged in or not\n     * based on the cookie set during the login\n     * \n     * @return {boolean}\n     */\n    userModel.getAuthStatus = function() {\n        var status = $cookies.get('auth');\n        if (status) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n\n    /**\n     * Return the user object from the cookie\n     * and convert from string to JSON\n     * \n     * @return {userObject}\n     */\n    userModel.getUserObject = function() {\n        var user = angular.fromJson($cookies.get('auth'));\n        return user;\n    }\n\n    /**\n     * Close the session of the current user\n     * and delete the cookie set for him\n     *\n     * @return boolean\n     */\n    userModel.doUserLogout = function() {\n        $cookies.remove('auth');\n    };\n\n    return userModel;\n}])\n"],"sourceRoot":"/source/"}